<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà | Life Dashboard</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body class="dark-mode">
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>üí∞ Life Dashboard</h2>
      <div class="theme-controls">
        <button class="theme-toggle">üåì</button>
        <button class="lang-toggle">üá¨üáß EN</button>
      </div>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-group">
        <div class="nav-group-title">üí∞ ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
        <a href="/" class="nav-item <%= activePage === 'overview' ? 'active' : '' %>">
          <span>üìä</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
        </a>
        <a href="/transactions" class="nav-item <%= activePage === 'transactions' ? 'active' : '' %>">
          <span>üßæ</span> ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°
        </a>
        <a href="/debts" class="nav-item <%= activePage === 'debts' ? 'active' : '' %>">
          <span>‚ö†Ô∏è</span> ‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô
        </a>
        <a href="/fixed-expenses" class="nav-item <%= activePage === 'fixed-expenses' ? 'active' : '' %>">
          <span>üìå</span> ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
        </a>
        <a href="/categories" class="nav-item <%= activePage === 'categories' ? 'active' : '' %>">
          <span>üè∑Ô∏è</span> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
        </a>
        <a href="/settings" class="nav-item <%= activePage === 'settings' ? 'active' : '' %>">
          <span>‚öôÔ∏è</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        </a>
      </div>
      <div class="nav-group">
        <div class="nav-group-title">üí™ ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>
        <a href="/health" class="nav-item">
          <span>üèÉ</span> ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
        </a>
      </div>
      <div class="nav-group">
        <div class="nav-group-title">üìà ‡∏´‡∏∏‡πâ‡∏ô</div>
        <a href="/stocks" class="nav-item">
          <span>üíπ</span> ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏ü‡∏•‡∏¥‡πÇ‡∏≠
        </a>
      </div>
      <div class="nav-group">
        <div class="nav-group-title">üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>
        <a href="/goals" class="nav-item">
          <span>üìù</span> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        </a>
      </div>
    </nav>
  </div>

  <div class="main-content">
    <div class="top-bar">
      <h1>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà</h1>
    </div>

    <div class="dashboard-grid">
      <div class="card">
        <h2>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà</h2>
        <form method="POST" action="/add-fixed-expense" class="form-inline">
          <input type="text" name="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà" required>
          <input type="number" step="0.01" name="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" required>
          <input type="number" name="pay_date" min="1" max="31" placeholder="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢">
          <input type="text" name="note" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏">
          <button type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
        </form>
      </div>
    </div>

    <div class="dashboard-tables">
      <div class="table-section">
        <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà</h2>
        <table>
          <tr>
            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢</th>
            <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
          </tr>
          <% fixed_expenses.forEach(f => { %>
            <tr>
              <td><%= f.name %></td>
              <td><%= f.amount %></td>
              <td><%= f.pay_date || '-' %></td>
              <td><%= f.note || '-' %></td>
            </tr>
          <% }) %>
        </table>
      </div>
    </div>
  </div>

  <script>
    // Dark Mode Toggle
    const themeToggle = document.querySelector('.theme-toggle');
    const body = document.body;
    
    const savedTheme = localStorage.getItem('theme') || 'dark';
    if (savedTheme === 'light') {
      body.classList.remove('dark-mode');
    }
    
    themeToggle?.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const newTheme = body.classList.contains('dark-mode') ? 'dark' : 'light';
      localStorage.setItem('theme', newTheme);
    });

    // Language Toggle
    const langToggle = document.querySelector('.lang-toggle');
    const translations = {
      th: {
        title: 'üí∞ Life Dashboard',
        overview: '‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°',
        transactions: '‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°',
        debts: '‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô',
        fixedExpenses: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà',
        categories: '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà',
        settings: '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô',
        pageTitle: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà',
        addExpense: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà',
        expenseList: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà',
        expenseName: '‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢',
        amount: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô',
        payDate: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢',
        note: '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏',
        add: '‡πÄ‡∏û‡∏¥‡πà‡∏°'
      },
      en: {
        title: 'üí∞ Life Dashboard',
        overview: 'Overview',
        transactions: 'Transactions',
        debts: 'Debts',
        fixedExpenses: 'Fixed Expenses',
        categories: 'Categories',
        settings: 'Settings',
        pageTitle: 'Fixed Expenses',
        addExpense: 'Add Fixed Expense',
        expenseList: 'Fixed Expense List',
        expenseName: 'Expense Name',
        amount: 'Amount',
        payDate: 'Pay Date',
        note: 'Note',
        add: 'Add'
      }
    };

    let currentLang = localStorage.getItem('lang') || 'th';
    
    function updateLanguage(lang) {
      const t = translations[lang];
      document.querySelector('.sidebar-header h2').textContent = t.title;
      document.querySelectorAll('.nav-item')[0].innerHTML = '<span>üìä</span> ' + t.overview;
      document.querySelectorAll('.nav-item')[1].innerHTML = '<span>üßæ</span> ' + t.transactions;
      document.querySelectorAll('.nav-item')[2].innerHTML = '<span>‚ö†Ô∏è</span> ' + t.debts;
      document.querySelectorAll('.nav-item')[3].innerHTML = '<span>üìå</span> ' + t.fixedExpenses;
      document.querySelectorAll('.nav-item')[4].innerHTML = '<span>üè∑Ô∏è</span> ' + t.categories;
      document.querySelectorAll('.nav-item')[5].innerHTML = '<span>‚öôÔ∏è</span> ' + t.settings;
      
      document.querySelector('.top-bar h1').textContent = t.pageTitle;
      document.querySelector('.card h2').textContent = t.addExpense;
      document.querySelector('.table-section h2').textContent = t.expenseList;
      
      const ths = document.querySelectorAll('th');
      if (ths[0]) ths[0].textContent = t.expenseName;
      if (ths[1]) ths[1].textContent = t.amount;
      if (ths[2]) ths[2].textContent = t.payDate;
      if (ths[3]) ths[3].textContent = t.note;
      
      document.querySelector('button[type="submit"]').textContent = t.add;
      document.querySelector('input[name="name"]').placeholder = t.expenseName;
      document.querySelector('input[name="amount"]').placeholder = t.amount;
      document.querySelector('input[name="pay_date"]').placeholder = t.payDate;
      document.querySelector('input[name="note"]').placeholder = t.note;
      
      langToggle.textContent = lang === 'th' ? 'üá¨üáß EN' : 'üáπüá≠ TH';
    }

    updateLanguage(currentLang);
    
    langToggle?.addEventListener('click', () => {
      currentLang = currentLang === 'th' ? 'en' : 'th';
      localStorage.setItem('lang', currentLang);
      updateLanguage(currentLang);
    });
  </script>
</body>
</html>
