<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Life Dashboard</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body class="dark-mode">
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>üí∞ Life Dashboard</h2>
      <div class="theme-controls">
        <button class="theme-toggle">üåì</button>
        <button class="lang-toggle">üá¨üáß EN</button>
      </div>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-group">
        <div class="nav-group-title">üí∞ ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
        <a href="/" class="nav-item <%= activePage === 'overview' ? 'active' : '' %>">
          <span>üìä</span> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
        </a>
        <a href="/transactions" class="nav-item <%= activePage === 'transactions' ? 'active' : '' %>">
          <span>üßæ</span> ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°
        </a>
        <a href="/debts" class="nav-item <%= activePage === 'debts' ? 'active' : '' %>">
          <span>‚ö†Ô∏è</span> ‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô
        </a>
        <a href="/fixed-expenses" class="nav-item <%= activePage === 'fixed-expenses' ? 'active' : '' %>">
          <span>üìå</span> ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
        </a>
        <a href="/categories" class="nav-item <%= activePage === 'categories' ? 'active' : '' %>">
          <span>üè∑Ô∏è</span> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
        </a>
        <a href="/settings" class="nav-item <%= activePage === 'settings' ? 'active' : '' %>">
          <span>‚öôÔ∏è</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        </a>
      </div>
      <div class="nav-group">
        <div class="nav-group-title">üí™ ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>
        <a href="/health" class="nav-item">
          <span>üèÉ</span> ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
        </a>
      </div>
      <div class="nav-group">
        <div class="nav-group-title">üìà ‡∏´‡∏∏‡πâ‡∏ô</div>
        <a href="/stocks" class="nav-item">
          <span>üíπ</span> ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏ü‡∏•‡∏¥‡πÇ‡∏≠
        </a>
      </div>
      <div class="nav-group">
        <div class="nav-group-title">üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>
        <a href="/goals" class="nav-item">
          <span>üìù</span> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        </a>
      </div>
    </nav>
  </div>

  <div class="main-content">
    <div class="top-bar" id="overview">
      <h1>‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h1>
    </div>

    <!-- Summary Cards -->
    <div class="summary-cards">
      <div class="summary-card balance">
        <div class="card-icon">üí∞</div>
        <div class="card-content">
          <h3>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
          <p class="amount"><%= currentBalance.toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</p>
        </div>
      </div>
      <div class="summary-card income">
        <div class="card-icon">üìà</div>
        <div class="card-content">
          <h3>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
          <p class="amount"><%= totalIncome.toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</p>
        </div>
      </div>
      <div class="summary-card expense">
        <div class="card-icon">üìâ</div>
        <div class="card-content">
          <h3>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
          <p class="amount"><%= totalExpense.toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</p>
        </div>
      </div>
      <div class="summary-card debt">
        <div class="card-icon">‚ö†Ô∏è</div>
        <div class="card-content">
          <h3>‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
          <p class="amount"><%= totalDebt.toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</p>
        </div>
      </div>
    </div>

    <div class="dashboard-tables">
      <div class="table-section">
        <h2>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° (‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</h2>
        <div class="table-stats">
          <div class="stat-item">
            <span class="stat-label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
            <span class="stat-value"><%= transactions.length %></span>
          </div>
          <div class="stat-item">
            <span class="stat-label">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
            <span class="stat-value positive"><%= transactions.filter(t => t.type === 'income').length %> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
            <span class="stat-value negative"><%= transactions.filter(t => t.type === 'expense').length %> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
          </div>
        </div>
        <table>
          <tr>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
            <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
          </tr>
          <% transactions.forEach(t => { %>
            <tr>
              <td><%= t.date.toISOString().slice(0,10) %></td>
              <td><span class="<%= t.type === 'income' ? 'income' : 'expense' %>" data-translate-type="<%= t.type %>"><%= t.type === 'income' ? '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö' : '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢' %></span></td>
              <td><%= t.category_name %></td>
              <td><%= t.amount %></td>
              <td><%= t.detail || '-' %></td>
            </tr>
          <% }) %>
        </table>
      </div>
      <div class="table-section">
        <h2>‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô</h2>
        <div class="table-stats">
          <div class="stat-item">
            <span class="stat-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
            <span class="stat-value warning"><%= debts.length %> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô</span>
            <span class="stat-value negative"><%= totalDebt.toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏£‡∏ß‡∏°</span>
            <span class="stat-value"><%= debts.reduce((sum, d) => sum + (parseFloat(d.monthly_payment) || 0), 0).toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</span>
          </div>
        </div>
        <table>
          <tr>
            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏µ‡πâ</th>
            <th>‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ</th>
            <th>‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
            <th>‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î</th>
            <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
          </tr>
          <% debts.forEach(d => { %>
            <tr>
              <td><%= d.name %></td>
              <td><%= d.amount %></td>
              <td><%= d.monthly_payment || '-' %></td>
              <td><%= d.due_date ? d.due_date.toISOString().slice(0,10) : '-' %></td>
              <td><%= d.note || '-' %></td>
            </tr>
          <% }) %>
        </table>
      </div>
      <div class="table-section">
        <h2>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà</h2>
        <div class="table-stats">
          <div class="stat-item">
            <span class="stat-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            <span class="stat-value"><%= fixed_expenses.length %> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
            <span class="stat-value negative"><%= fixed_expenses.reduce((sum, f) => sum + parseFloat(f.amount), 0).toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡∏õ‡∏µ</span>
            <span class="stat-value"><%= (fixed_expenses.reduce((sum, f) => sum + parseFloat(f.amount), 0) * 12).toLocaleString('th-TH', {minimumFractionDigits: 2}) %> ‡∏ø</span>
          </div>
        </div>
        <table>
          <tr>
            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢</th>
            <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
          </tr>
          <% fixed_expenses.forEach(f => { %>
            <tr>
              <td><%= f.name %></td>
              <td><%= f.amount %></td>
              <td><%= f.pay_date || '-' %></td>
              <td><%= f.note || '-' %></td>
            </tr>
          <% }) %>
        </table>
      </div>
    </div>
  </div>

  <script>
    // Dark Mode Toggle
    const themeToggle = document.querySelector('.theme-toggle');
    const body = document.body;
    
    // Load saved theme
    const savedTheme = localStorage.getItem('theme') || 'dark';
    if (savedTheme === 'light') {
      body.classList.remove('dark-mode');
    }
    
    themeToggle?.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const newTheme = body.classList.contains('dark-mode') ? 'dark' : 'light';
      localStorage.setItem('theme', newTheme);
    });

    // Language Toggle
    const langToggle = document.querySelector('.lang-toggle');
    const translations = {
      th: {
        title: 'üí∞ Life Dashboard',
        overview: '‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°',
        transactions: '‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°',
        debts: '‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô',
        fixedExpenses: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà',
        categories: '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà',
        settings: '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô',
        summaryTitle: '‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô',
        totalBalance: '‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        totalIncome: '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        totalExpense: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        totalDebt: '‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        transactionHistory: '‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° (‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)',
        debtList: '‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô',
        fixedExpenseList: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏á‡∏ó‡∏µ‡πà',
        date: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà',
        type: '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó',
        category: '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà',
        amount: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô',
        detail: '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î',
        income: '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö',
        expense: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢',
        debtName: '‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏µ‡πâ',
        debtAmount: '‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ',
        monthlyPayment: '‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô',
        dueDate: '‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
        note: '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏',
        expenseName: '‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢',
        payDate: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢',
        totalItems: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        recentIncome: '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î',
        recentExpense: '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î',
        items: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£',
        totalDebtCount: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        totalDebtAmount: '‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô',
        totalMonthlyPayment: '‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏£‡∏ß‡∏°',
        itemCount: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£',
        monthlyTotal: '‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô',
        yearlyTotal: '‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡∏õ‡∏µ'
      },
      en: {
        title: 'üí∞ Life Dashboard',
        overview: 'Overview',
        transactions: 'Transactions',
        debts: 'Debts',
        fixedExpenses: 'Fixed Expenses',
        categories: 'Categories',
        settings: 'Settings',
        summaryTitle: 'Financial Summary',
        totalBalance: 'Total Balance',
        totalIncome: 'Total Income',
        totalExpense: 'Total Expense',
        totalDebt: 'Total Debt',
        transactionHistory: 'Recent Transactions',
        debtList: 'Debts',
        fixedExpenseList: 'Fixed Expenses',
        date: 'Date',
        type: 'Type',
        category: 'Category',
        amount: 'Amount',
        detail: 'Detail',
        income: 'Income',
        expense: 'Expense',
        debtName: 'Debt Name',
        debtAmount: 'Debt Amount',
        monthlyPayment: 'Monthly Payment',
        dueDate: 'Due Date',
        note: 'Note',
        expenseName: 'Expense Name',
        payDate: 'Pay Date',
        totalItems: 'Total Items',
        recentIncome: 'Recent Income',
        recentExpense: 'Recent Expense',
        items: 'items',
        totalDebtCount: 'Total Debts',
        totalDebtAmount: 'Total Debt Amount',
        totalMonthlyPayment: 'Total Monthly Payment',
        itemCount: 'Total Items',
        monthlyTotal: 'Monthly Total',
        yearlyTotal: 'Yearly Total'
      }
    };

    let currentLang = localStorage.getItem('lang') || 'th';
    
    function updateLanguage(lang) {
      const t = translations[lang];
      document.querySelector('.sidebar-header h2').textContent = t.title;
      document.querySelectorAll('.nav-item')[0].innerHTML = '<span>üìä</span> ' + t.overview;
      document.querySelectorAll('.nav-item')[1].innerHTML = '<span>üßæ</span> ' + t.transactions;
      document.querySelectorAll('.nav-item')[2].innerHTML = '<span>‚ö†Ô∏è</span> ' + t.debts;
      document.querySelectorAll('.nav-item')[3].innerHTML = '<span>üìå</span> ' + t.fixedExpenses;
      document.querySelectorAll('.nav-item')[4].innerHTML = '<span>üè∑Ô∏è</span> ' + t.categories;
      document.querySelectorAll('.nav-item')[5].innerHTML = '<span>‚öôÔ∏è</span> ' + t.settings;
      
      document.querySelector('.top-bar h1').textContent = t.summaryTitle;
      
      const cards = document.querySelectorAll('.card-content h3');
      if (cards[0]) cards[0].textContent = t.totalBalance;
      if (cards[1]) cards[1].textContent = t.totalIncome;
      if (cards[2]) cards[2].textContent = t.totalExpense;
      if (cards[3]) cards[3].textContent = t.totalDebt;
      
      const sections = document.querySelectorAll('.table-section h2');
      if (sections[0]) sections[0].textContent = t.transactionHistory;
      if (sections[1]) sections[1].textContent = t.debtList;
      if (sections[2]) sections[2].textContent = t.fixedExpenseList;
      
      // Translate table headers
      const transactionHeaders = document.querySelectorAll('.table-section')[0]?.querySelectorAll('th');
      if (transactionHeaders) {
        if (transactionHeaders[0]) transactionHeaders[0].textContent = t.date;
        if (transactionHeaders[1]) transactionHeaders[1].textContent = t.type;
        if (transactionHeaders[2]) transactionHeaders[2].textContent = t.category;
        if (transactionHeaders[3]) transactionHeaders[3].textContent = t.amount;
        if (transactionHeaders[4]) transactionHeaders[4].textContent = t.detail;
      }
      
      const debtHeaders = document.querySelectorAll('.table-section')[1]?.querySelectorAll('th');
      if (debtHeaders) {
        if (debtHeaders[0]) debtHeaders[0].textContent = t.debtName;
        if (debtHeaders[1]) debtHeaders[1].textContent = t.debtAmount;
        if (debtHeaders[2]) debtHeaders[2].textContent = t.monthlyPayment;
        if (debtHeaders[3]) debtHeaders[3].textContent = t.dueDate;
        if (debtHeaders[4]) debtHeaders[4].textContent = t.note;
      }
      
      const expenseHeaders = document.querySelectorAll('.table-section')[2]?.querySelectorAll('th');
      if (expenseHeaders) {
        if (expenseHeaders[0]) expenseHeaders[0].textContent = t.expenseName;
        if (expenseHeaders[1]) expenseHeaders[1].textContent = t.amount;
        if (expenseHeaders[2]) expenseHeaders[2].textContent = t.payDate;
        if (expenseHeaders[3]) expenseHeaders[3].textContent = t.note;
      }
      
      // Translate stat labels
      const statLabels = document.querySelectorAll('.stat-label');
      if (statLabels[0]) statLabels[0].textContent = t.totalItems;
      if (statLabels[1]) statLabels[1].textContent = t.recentIncome;
      if (statLabels[2]) statLabels[2].textContent = t.recentExpense;
      if (statLabels[3]) statLabels[3].textContent = t.totalDebtCount;
      if (statLabels[4]) statLabels[4].textContent = t.totalDebtAmount;
      if (statLabels[5]) statLabels[5].textContent = t.totalMonthlyPayment;
      if (statLabels[6]) statLabels[6].textContent = t.itemCount;
      if (statLabels[7]) statLabels[7].textContent = t.monthlyTotal;
      if (statLabels[8]) statLabels[8].textContent = t.yearlyTotal;
      
      // Translate "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" text in stat values
      document.querySelectorAll('.stat-value').forEach(val => {
        if (val.textContent.includes('‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£')) {
          val.textContent = val.textContent.replace('‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', t.items);
        }
      });
      
      // Translate table data
      document.querySelectorAll('td[data-translate-type]').forEach(td => {
        const type = td.getAttribute('data-translate-type');
        td.textContent = type === 'income' ? t.income : t.expense;
      });
      
      langToggle.textContent = lang === 'th' ? 'üá¨üáß EN' : 'üáπüá≠ TH';
    }

    updateLanguage(currentLang);
    
    langToggle?.addEventListener('click', () => {
      currentLang = currentLang === 'th' ? 'en' : 'th';
      localStorage.setItem('lang', currentLang);
      updateLanguage(currentLang);
    });
  </script>
</body>
</html>
